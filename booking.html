<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Book an Appointment with Cognitio+</title>
    <meta name="description" content="Cognitio + | Your Partner in Resilience. Rooted in Culture. Powered by Technology.">
    <meta name="keywords" content="consultation, therapy, booking, resilience, psychosocial, Cognitio Plus, appointment, mental health, coaching, support">
    <meta name="author" content="Cognitio +">
    <link rel="stylesheet" href="booking-style.css">
    <link rel="manifest" href="booking-manifest.json">
    <link rel="icon" href="favicon.ico">
    <meta name="theme-color" content="#2a3142">
    <!-- Structured data for SEO -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebPage",
      "name": "Book Consultation - Cognitio +",
      "description": "Book a resilience or therapy session with Cognitio+.",
      "url": "https://cognitioplus.com/booking.html"
    }
    </script>
</head>
<body>
    <header>
        <h1>Book an Appointment</h1>
    </header>
    <main>
        <form id="bookingForm" aria-labelledby="bookingFormTitle" autocomplete="on" novalidate>
            <h2 id="bookingFormTitle">Booking Form</h2>

            <!-- Section I: Consent & Policy Agreement -->
            <fieldset>
                <legend>Consent & Policy Agreement</legend>
                <div>
                    <input type="checkbox" id="consent" name="consent" required aria-required="true">
                    <label for="consent">
                        I understand and consent to the collection, use, and processing of my personal data for booking purposes, in compliance with the 
                        <a href="https://cognitio-plus.appimize.app/privacy-policy" target="_blank" rel="noopener noreferrer">Privacy Policy</a> and 
                        <a href="https://cognitio-plus.appimize.app/terms-of-services" target="_blank" rel="noopener noreferrer">Terms of Service</a>.
                    </label>
                </div>
            </fieldset>
            <br>

            <!-- Section II: Personal Information -->
            <fieldset>
                <legend>I. Personal Information</legend>
                <div>
                    <label for="fullName">Full Name <span aria-hidden="true"></span></label>
                    <input type="text" id="fullName" name="fullName" required aria-required="true" autocomplete="name" placeholder="e.g. Juan Dela Cruz" aria-describedby="fullNameHelp">
                    <span id="fullNameHelp" class="sr-only">Please enter your full name as shown on a valid government issued ID.</span>
                </div>
                <div>
                    <label for="email">Email Address <span aria-hidden="true"></span></label>
                    <input type="email" id="email" name="email" required aria-required="true" autocomplete="email" placeholder="e.g. juan@email.com" aria-describedby="emailHelp" pattern="^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$" title="Please enter a valid email address.">
                    <span id="emailHelp" class="sr-only">We'll send booking details to this address.</span>
                </div>
                <div>
                    <label for="phone">Contact Number <span aria-hidden="true"></span></label>
                    <input type="tel" id="phone" name="phone" required aria-required="true" autocomplete="tel" pattern="^\+?[0-9\s\-]{7,15}$" title="Please enter a valid phone number." placeholder="+63 912 345 6789" aria-describedby="phoneHelp">
                    <span id="phoneHelp" class="sr-only">Format: +Country Code Number</span>
                </div>
                <div>
                    <label for="dob">Date of Birth <span aria-hidden="true"></span></label>
                    <input type="date" id="dob" name="dob" required aria-required="true" aria-describedby="dobHelp" max="2020-01-01">
                    <span id="dobHelp" class="sr-only">Use MM/DD/YYYY format.</span>
                </div>
                <div>
                    <label for="address">Complete Address <span aria-hidden="true"></span></label>
                    <input type="text" id="address" name="address" required autocomplete="street-address" placeholder="e.g. 123 Main St., Quezon City, Metro Manila" aria-describedby="addressHelp">
                    <span id="addressHelp" class="sr-only">Please enter your full address for location purposes.</span>
                </div>
            </fieldset>
            <br>

            <!-- Area Type Dropdown -->
            <div>
                <label for="areaType">Area Type:</label>
                <select id="areaType" name="areaType" aria-describedby="areaTypeHelp">
                    <option value="">Select Area Type</option>
                    <option value="huc">Highly Urbanized City (HUCs)</option>
                    <option value="non_huc">Non HUCs</option>
                </select>
                <span id="areaTypeHelp" class="sr-only">Select your area type based on your location.</span>
            </div>
            <br>

            <!-- Vulnerable Population Segment Dropdown -->
            <div>
                <label for="vulnerableSegment">Vulnerable Population Segment:</label>
                <select id="vulnerableSegment" name="vulnerableSegment" aria-describedby="vulnerableSegmentHelp">
                    <option value="">How do you consider yourself? Select one of these segments.</option>
                    <option value="student">Student</option>
                    <option value="school_leaver">School Leaver</option>
                    <option value="solo_parent">Solo Parent</option>
                    <option value="elderly">Elderly</option>
                    <option value="pwd">PWD</option>
                    <option value="low_income_family">Low-income Family</option>
                    <option value="victims_of_disasters">Victims of Disasters</option>
                    <option value="informal_settler">Informal Settler</option>
                    <option value="lgbtq+">LGBTQ+</option>
                    <option value="general_public">General Public</option>
                </select>
                <span id="vulnerableSegmentHelp" class="sr-only">If you identify with any vulnerable segment, please select.</span>
            </div>
            <br>

            <!-- Section III: Service Type -->
            <fieldset>
                <legend>II. Service Type</legend>
                <div>
                    <label for="serviceType">Service <span aria-hidden="true"></span></label>
                    <select id="serviceType" name="serviceType" required aria-required="true">
                        <option value="">Select a service</option>
                        <option value="consultation">Psychiatric Consultation</option>
                        <option value="therapy">Talk Therapy</option>
                        <option value="SPSS">Specialist Psychosocial Support</option>
                        <option value="SPS Rehab">Specialist Psychosocial Rehab and Recovery Support</option>
                        <option value="coaching">Resilience Coaching</option>
                    </select>
                </div>
            </fieldset>

            <!-- Section IV: Session Duration -->
            <fieldset>
                <legend>III. Session Duration</legend>
                <div>
                    <label for="duration">Duration (minutes) <span aria-hidden="true"></span></label>
                    <input type="number" id="duration" name="duration" required aria-required="true" min="30" max="180" step="15" value="60" aria-describedby="durationHelp">
                    <span id="durationHelp" class="sr-only">Session must be between 30 and 180 minutes.</span>
                </div>
            </fieldset>

            <!-- Section V: Appointment Date & Time -->
            <fieldset>
                <legend>IV. Appointment Date & Time</legend>
                <div>
                    <label for="appointmentDate">Date <span aria-hidden="true"></span></label>
                    <input type="date" id="appointmentDate" name="appointmentDate" required aria-required="true" min="">
                </div>
                <div>
                    <label for="appointmentTime">Time <span aria-hidden="true"></span></label>
                    <input type="time" id="appointmentTime" name="appointmentTime" required aria-required="true">
                </div>
            </fieldset>

            <!-- Section VI: Concerns -->
            <fieldset>
                <legend>V. Briefly Describe Your Concerns</legend>
                <div>
                    <label for="concerns">Your Concerns <span aria-hidden="true"></span></label>
                    <textarea id="concerns" name="concerns" required aria-required="true" placeholder="E.g. stress, anxiety, relationship, etc." aria-describedby="concernsHelp"></textarea>
                    <span id="concernsHelp" class="sr-only">Briefly describe what brings you to this session.</span>
                </div>
            </fieldset>

            <!-- Section VII: Price Calculation -->
            <fieldset>
                <legend>VI. Price Calculation</legend>
                <div>
                    <strong>Price Policy:</strong>
                    <br>Base price: ₱899 for the first hour.
                    <br>Additional minutes: ₱200 per 10 minutes.
                    <br><span id="discountInfo" aria-live="polite"></span>
                </div>
                <div>
                    <label for="calculatedPrice">Calculated Price</label>
                    <output id="calculatedPrice" name="calculatedPrice" for="duration" aria-live="polite">₱899.00</output>
                </div>
            </fieldset>

            <!-- Error Message -->
            <div id="errorMsg" role="alert" aria-live="assertive"></div>

            <!-- Submit Button -->
            <button type="submit" id="submitBtn">Book Now</button>
        </form>
    </main>

    <!-- Accessibility: Error styling -->
    <style>
        #errorMsg {
            color: #b00020;
            background: #fff0f0;
            border: 1px solid #b00020;
            padding: 0.5em;
            margin-top: 1em;
            display: none;
        }
        #errorMsg.active {
            display: block;
        }
    </style>

    <!-- Booking Script -->
    <script src="booking-script.js"></script>

    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('booking-sw.js')
                    .then(reg => {
                        console.log('Booking-Service Worker registered:', reg.scope);
                    })
                    .catch(err => {
                        const errorElem = document.getElementById('errorMsg');
                        if (errorElem) {
                            errorElem.textContent = 'Offline features are unavailable: Service Worker registration failed.';
                            errorElem.classList.add('active');
                        }
                        console.error('Service Worker registration failed:', err);
                    });
            });
        }
    </script>
</body>
</html>
